<% content_for :table_filter do %>
  <% form_path = @product ? admin_product_stock_path(product: @product) : admin_stock_items_path %>
  <%= render partial: 'spree/admin/shared/variant_search', locals: { form_path: form_path, stock_locations: @stock_locations } %>
<% end %>

<% if @stockmovelog.any? %>
  <table class="index" id="listing_products">
    <colgroup>
       <col style="width: 15%;">
       <col style="width: 5%;">
       <col style="width: 50%;">
       <col style="width: 15%;">
       <col style="width: 15%;">
    </colgroup>
    <tbody>
      <% @stockmovelog.each do |movement| %>
      <% @variants.each do |variant| %>
          <tr>
            <td><%= movement.updated_at %></td>
            <td class="align-center"><%= movement.quantity %></td>
            <% @variant_display_attributes.each do |display_attribute| %>
            <td class="align-right"><%= variant.send(display_attribute[:attr_name]) %></td>
            <% end %>
            <td class='variant-image' style="height: 34px;">
              <%= render 'spree/admin/shared/image',
                image: variant.gallery.images.first,
                size: :mini %>
            </td>
          </tr>
          <% end %>
      <% end %>
    </tbody>
  </table>
<% else %>
  <div class="no-objects-found">
    <%= render 'spree/admin/shared/no_objects_found',
                  resource: Spree::Product,
                  new_resource_url: new_object_url %>
  </div>
<% end %>
